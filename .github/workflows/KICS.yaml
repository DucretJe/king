---
name: 🫏 KICS

on:
  pull_request:

permissions:
  pull-requests: write

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: 🛎️ Checkout
      uses: actions/checkout@0ad4b8fadaa221de15dcec353f45205ec38ea70b # v4

    - name: 🪄 Mkdir results-dir
      run: mkdir -p results-dir

    - name: 📡 run kics Scan
      uses: checkmarx/kics-github-action@v2.0.0
      with:
        path: docker/
        fail_on: high,medium
        output_path: results-dir
        token: ${{ secrets.GITHUB_TOKEN }}
        enable_comments: true
